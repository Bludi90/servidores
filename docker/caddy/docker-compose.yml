name: caddy

services:
  caddy:
    image: caddy:latest
    container_name: caddy
    hostname: caddy

    cpu_shares: 90
    deploy:
      resources:
        limits:
          memory: "16024338432"

    restart: unless-stopped

    # Caddy comparte red con el host â†’ ve 127.0.0.1:17080
    network_mode: host

    labels:
      icon: "https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/caddy.png"

    volumes:
      - type: bind
        source: /srv/storage/services/reverse-proxy/caddy/config
        target: /etc/caddy
      - type: bind
        source: /srv/storage/services/reverse-proxy/caddy/data
        target: /data
      - type: bind
        source: /srv/storage/services/portal/data
        target: /srv/storage/services/portal/data

x-casaos:
  author: "alejandro"
  category: "network"
  hostname: ""
  icon: "https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/caddy.png"
  index: "/"
  is_uncontrolled: false
  port_map: "443"
  scheme: "https"
  title:
    custom: "Caddy Reverse Proxy"
